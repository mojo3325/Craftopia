<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Beautiful Calculator</title>
  <style>
    :root {
      --color-primary: #186DEE;
      --color-primary-gradient-top: #6DA4FB;
      --color-primary-gradient-bottom: #206CE5;
      --color-secondary: #ECECEC;
      --color-bg: #F5F6F8;
      --color-surface: #FFFFFF;
      --color-surface-secondary: #FAFBFC;
      --color-border: #E3E6EB;
      --color-border-strong: #2D5DB7;
      --color-text: #4B5669;
      --color-text-heading: #131B22;
      --color-text-muted: #99A1B3;
      --color-success: #2ED47A;
      --color-warning: #EDA23A;
      --color-error: #F05A5A;
      --font-stack: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      --border-radius: 12px;
      --transition-speed: 150ms;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --color-primary: #4A90E2;
        --color-primary-gradient-top: #5BA3F5;
        --color-primary-gradient-bottom: #3B7DD8;
        --color-secondary: #2C2C2E;
        --color-bg: #000000;
        --color-surface: #1C1C1E;
        --color-surface-secondary: #2C2C2E;
        --color-border: #38383A;
        --color-border-strong: #0A84FF;
        --color-text: #FFFFFF;
        --color-text-heading: #FFFFFF;
        --color-text-muted: #8E8E93;
        --color-success: #30D158;
        --color-warning: #FF9F0A;
        --color-error: #FF453A;
      }
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-stack);
      background-color: var(--color-bg);
      color: var(--color-text);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
    }

    .calculator {
      width: 100%;
      max-width: 320px;
      background-color: var(--color-surface);
      border-radius: var(--border-radius);
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      box-shadow: 0 0 0 1px var(--color-border);
    }

    .display {
      background-color: var(--color-surface-secondary);
      border-radius: var(--border-radius);
      padding: 16px;
      text-align: right;
      font-size: 2rem;
      min-height: 60px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      border: 1px solid var(--color-border);
    }

    .display__history {
      color: var(--color-text-muted);
      font-size: 1rem;
      min-height: 20px;
    }

    .display__current {
      color: var(--color-text-heading);
      font-weight: 500;
    }

    .keypad {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }

    .key {
      background-color: var(--color-secondary);
      border: none;
      border-radius: var(--border-radius);
      color: var(--color-text-heading);
      font-size: 1.25rem;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background-color var(--transition-speed), transform var(--transition-speed);
      user-select: none;
    }

    .key:active {
      transform: scale(0.95);
    }

    .key--operator {
      background-color: var(--color-primary);
      color: white;
    }

    .key--function {
      background-color: var(--color-surface-secondary);
      color: var(--color-text-muted);
    }

    .key--equals {
      background: linear-gradient(to bottom, var(--color-primary-gradient-top), var(--color-primary-gradient-bottom));
      color: white;
      grid-column: span 2;
    }

    .key:focus {
      outline: 2px solid var(--color-border-strong);
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <div class="calculator">
    <div class="display">
      <div class="display__history" id="history"></div>
      <div class="display__current" id="current">0</div>
    </div>
    <div class="keypad">
      <button class="key key--function" data-action="clear">C</button>
      <button class="key key--function" data-action="sign">±</button>
      <button class="key key--function" data-action="percent">%</button>
      <button class="key key--operator" data-operator="÷">÷</button>
      
      <button class="key" data-number="7">7</button>
      <button class="key" data-number="8">8</button>
      <button class="key" data-number="9">9</button>
      <button class="key key--operator" data-operator="×">×</button>
      
      <button class="key" data-number="4">4</button>
      <button class="key" data-number="5">5</button>
      <button class="key" data-number="6">6</button>
      <button class="key key--operator" data-operator="-">-</button>
      
      <button class="key" data-number="1">1</button>
      <button class="key" data-number="2">2</button>
      <button class="key" data-number="3">3</button>
      <button class="key key--operator" data-operator="+">+</button>
      
      <button class="key" data-number="0">0</button>
      <button class="key" data-action="decimal">.</button>
      <button class="key key--equals" data-action="calculate">=</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const displayCurrent = document.getElementById('current');
      const displayHistory = document.getElementById('history');
      
      let currentInput = '0';
      let previousInput = '';
      let operation = null;
      let resetScreen = false;
      
      // Update display
      function updateDisplay() {
        displayCurrent.textContent = currentInput;
        displayHistory.textContent = previousInput + (operation ? ` ${operation}` : '');
      }
      
      // Reset calculator
      function clear() {
        currentInput = '0';
        previousInput = '';
        operation = null;
        resetScreen = false;
        updateDisplay();
      }
      
      // Append number
      function appendNumber(number) {
        if (currentInput === '0' || resetScreen) {
          currentInput = number;
          resetScreen = false;
        } else {
          currentInput += number;
        }
        updateDisplay();
      }
      
      // Choose operation
      function chooseOperation(op) {
        if (currentInput === '') return;
        if (previousInput !== '') {
          calculate();
        }
        operation = op;
        previousInput = currentInput;
        resetScreen = true;
        updateDisplay();
      }
      
      // Calculate
      function calculate() {
        if (operation === null || resetScreen) return;
        
        let computation;
        const prev = parseFloat(previousInput);
        const current = parseFloat(currentInput);
        
        if (isNaN(prev) || isNaN(current)) return;
        
        try {
          switch (operation) {
            case '+':
              computation = prev + current;
              break;
            case '-':
              computation = prev - current;
              break;
            case '×':
              computation = prev * current;
              break;
            case '÷':
              if (current === 0) throw new Error('Division by zero');
              computation = prev / current;
              break;
            default:
              return;
          }
        } catch (error) {
          console.error(error);
          currentInput = 'Error';
          operation = null;
          previousInput = '';
          updateDisplay();
          return;
        }
        
        currentInput = computation.toString();
        operation = null;
        previousInput = '';
        resetScreen = true;
        updateDisplay();
      }
      
      // Add decimal point
      function addDecimal() {
        if (resetScreen) {
          currentInput = '0.';
          resetScreen = false;
          updateDisplay();
          return;
        }
        
        if (!currentInput.includes('.')) {
          currentInput += '.';
          updateDisplay();
        }
      }
      
      // Toggle sign
      function toggleSign() {
        currentInput = (parseFloat(currentInput) * -1).toString();
        updateDisplay();
      }
      
      // Convert to percentage
      function convertToPercentage() {
        currentInput = (parseFloat(currentInput) / 100).toString();
        updateDisplay();
      }
      
      // Handle key presses
      document.querySelectorAll('.key').forEach(button => {
        button.addEventListener('click', () => {
          if (button.dataset.number) {
            appendNumber(button.dataset.number);
          } else if (button.dataset.operator) {
            chooseOperation(button.dataset.operator);
          } else if (button.dataset.action === 'calculate') {
            calculate();
          } else if (button.dataset.action === 'clear') {
            clear();
          } else if (button.dataset.action === 'decimal') {
            addDecimal();
          } else if (button.dataset.action === 'sign') {
            toggleSign();
          } else if (button.dataset.action === 'percent') {
            convertToPercentage();
          }
        });
      });
      
      // Initialize display
      updateDisplay();
    });
  </script>
</body>
</html>